<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:tcamt="http://java.sun.com/jsf/composite/tcamt"
	xmlns:composite="http://java.sun.com/jsf/composite">
<composite:interface>
</composite:interface>

<composite:implementation>
	<h:form id="DataInstanceTestForm">
		<p:growl id="growl_DataInstanceTest" />
		<p:accordionPanel widgetVar="DataInstanceTestPanel"
			activeIndex="#{sessionBeanTCAMT.ditActiveIndex}">
			<p:tab id="DataInstanceTestPanel_List"
				title="Data Instance Test Plan List">
				<table width="100%">
					<tr>
						<td align="right"><p:commandButton
								update=":#{p:component('DataInstanceTestForm')}"
								value="Create New TestPlan" icon="ui-icon-plus"
								actionListener="#{dataInstanceTestPlanRequestBean.createTestPlan}" />
						</td>
					</tr>
				</table>

				<p:dataTable id="testplanTable" var="testplan"
					value="#{dataInstanceTestPlanRequestBean.testPlans}">
					<p:column headerText="Name">
						<h:outputText value="#{testplan.name}" />
					</p:column>
					
					<p:column headerText="Type">
						<h:outputText value="#{testplan.type}" />
					</p:column>

					<p:column headerText="Description">
						<h:outputText value="#{testplan.longDescription}" />
					</p:column>

					<p:column headerText="Last Updated">
						<h:outputText value="#{testplan.lastUpdateDate}" />
					</p:column>

					<p:column headerText="Action">
						<p:commandButton value="Edit"
							actionListener="#{dataInstanceTestPlanRequestBean.selectTestPlan}"
							update=":#{p:component('DataInstanceTestForm')}"
							icon="ui-icon-search" title="Select Test Plan">
							<f:attribute name="testplan" value="#{testplan}" />
						</p:commandButton>
						<p:commandButton value="Cloning"
							actionListener="#{dataInstanceTestPlanRequestBean.cloneTestPlan}"
							update=":#{p:component('DataInstanceTestForm')}"
							icon="ui-icon-plus" title="Cloning">
							<f:attribute name="testplan" value="#{testplan}" />
						</p:commandButton>
						<p:commandButton value="Sharing" icon="ui-icon-transfer-e-w"
							update=":#{p:component('shareDataInstanceTestPlanForm')}"
							actionListener="#{dataInstanceTestPlanRequestBean.shareInit}"
							oncomplete="PF('shareDataInstanceTestPlan').show();">
							<f:attribute name="testplan" value="#{testplan}" />
						</p:commandButton>
						<p:commandButton value="Export ResourceBundle" ajax="false"
							actionListener="#{dataInstanceTestPlanRequestBean.downloadResourceBundleForTestPlan(testplan, false)}"
							icon="ui-icon-print" update=":#{p:component('growl_DataInstanceTest')}">
							<p:fileDownload
								value="#{dataInstanceTestPlanRequestBean.zipResourceBundleFile}" />
						</p:commandButton>
						<p:commandButton value="Export ResourceBundle with PDF" ajax="false"
							actionListener="#{dataInstanceTestPlanRequestBean.downloadResourceBundleForTestPlan(testplan, true)}"
							icon="ui-icon-print" update=":#{p:component('growl_DataInstanceTest')}">
							<p:fileDownload
								value="#{dataInstanceTestPlanRequestBean.zipResourceBundleFile}" />
						</p:commandButton>
						<p:commandButton value="Delete"
							actionListener="#{dataInstanceTestPlanRequestBean.deleteTestPlan}"
							update=":#{p:component('DataInstanceTestForm')}"
							icon="ui-icon-close" title="Delete Test Plan">
							<f:attribute name="testplan" value="#{testplan}" />
						</p:commandButton>
					</p:column>
				</p:dataTable>
			</p:tab>
			<p:tab title="Data Instance Test Plan DashBoard">
				<p:layout style="min-width:400px;min-height:1000px;">
					<p:ajax event="resize" update=":#{p:component('testplanTree')} :#{p:component('dashboard')}"  />
					<p:layoutUnit position="north" style="border: 0;">
						<table width="100%">
							<tr>
								<td align="right">
<!-- 									<p:commandButton value="Delete All TestDataCategorization for NonLeafNode" icon="ui-icon-alert"
										actionListener="#{dataInstanceTestPlanRequestBean.deleteAllTestDataCategorizationForNonLeafNodeForTestPlan}" /> -->
									<p:commandButton value="Save Test Plan"
										actionListener="#{dataInstanceTestPlanRequestBean.saveTestPlan}"
										update=":#{p:component('testplanTable')} :#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
										icon="ui-icon-disk" title="Save Test Plan" />
									<p:commandButton value="Close"
										actionListener="#{dataInstanceTestPlanRequestBean.closeTestPlan}"
										update=":#{p:component('DataInstanceTestForm')}"
										icon="ui-icon-close" title="Close Test Plan" >
										<p:confirm header="Confirmation" message="Unsaved data will be lost. Do you want to close?" icon="ui-icon-alert" />
									</p:commandButton>
									
									<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        								<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        								<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
    								</p:confirmDialog>
								</td>
							</tr>
						</table>
					</p:layoutUnit>
					<p:layoutUnit position="west" header="TestPlan Structure" resizable="true" style="border: 0;" collapsible="true" size="25%">
						<p:tree id="testplanTree" animate="false" value="#{dataInstanceTestPlanRequestBean.testplanRoot}" draggable="true" droppable="true" var="node" selectionMode="single" selection="#{dataInstanceTestPlanRequestBean.selectedNode}" dynamic="true" style="border-width:0;">
							<p:ajax event="expand" listener="#{dataInstanceTestPlanRequestBean.onNodeExpand}" update=":#{p:component('growl_DataInstanceTest')}"/>
        					<p:ajax event="collapse" listener="#{dataInstanceTestPlanRequestBean.onNodeCollapse}" update=":#{p:component('growl_DataInstanceTest')}"/>
							<p:ajax event="select" listener="#{dataInstanceTestPlanRequestBean.onNodeSelect}" update=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}" />
							<p:ajax event="dragdrop" listener="#{dataInstanceTestPlanRequestBean.onDragDrop}" update=":#{p:component('testplanTree')} :#{p:component('growl_DataInstanceTest')}" />

							<p:treeNode expandedIcon="ui-icon-folder-open"
								collapsedIcon="ui-icon-folder-collapsed">
								<h:outputText value="#{node.name}" />
							</p:treeNode>
							<p:treeNode type="plan" icon="ui-icon-home">
								<h:outputText rendered="#{not node.changed}" value="#{node.name}" />
								<h:outputText rendered="#{node.changed}" value="*#{node.name}" style="font-style:italic;" />
							</p:treeNode>
							<p:treeNode type="group" icon="ui-icon-cart">
								<h:outputText rendered="#{not node.changed}" value="[#{node.position}]#{node.name}" />
								<h:outputText rendered="#{node.changed}" value="*[#{node.position}]#{node.name}" style="font-style:italic;" />
							</p:treeNode>
							<p:treeNode type="case" icon="ui-icon-note">
								<h:outputText rendered="#{not node.changed}" value="[#{node.position}]#{node.name}" />
								<h:outputText rendered="#{node.changed}" value="*[#{node.position}]#{node.name}" style="font-style:italic;" />
							</p:treeNode>
							<p:treeNode type="step" icon="ui-icon-document">
								<h:outputText rendered="#{not node.changed}" value="[#{node.position}]#{node.name}" />
								<h:outputText rendered="#{node.changed}" value="*[#{node.position}]#{node.name}" style="font-style:italic;" />
							</p:treeNode>
						</p:tree>
						<p:contextMenu for="testplanTree" nodeType="plan">
							<p:menuitem value="Add new TestCaseGroup"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.addTestCaseGroup}"
								icon="ui-icon-plus" />
							<p:menuitem value="Add new TestCase"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.addTestCase}"
								icon="ui-icon-plus" />
						</p:contextMenu>
						<p:contextMenu for="testplanTree" nodeType="group">
							<p:menuitem value="Add new TestCase"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.addTestCase}"
								icon="ui-icon-plus" />
							<p:menuitem value="Clone TestCaseGroup"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.cloneTestCaseGroup}"
								icon="ui-icon-plus" />
							<p:menuitem value="Delete TestCaseGroup"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.deleteTestCaseGroup}"
								icon="ui-icon-minus" />
						</p:contextMenu>
						<p:contextMenu for="testplanTree" nodeType="case">
							<p:menuitem value="Add new TestStep"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.addTestStep}"
								icon="ui-icon-plus" />
							<p:menuitem value="Clone TestCase"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.cloneTestCase}"
								icon="ui-icon-plus" />
							<p:menuitem value="Delete TestCase"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.deleteTestCase}"
								icon="ui-icon-minus" />
						</p:contextMenu>
						<p:contextMenu for="testplanTree" nodeType="step">
							<p:menuitem value="Clone TestStep"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.cloneTestStep}"
								icon="ui-icon-plus" />
							<p:menuitem value="Delete TestStep"
								update=":#{p:component('testplanTree')} :#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
								actionListener="#{dataInstanceTestPlanRequestBean.deleteTestStep}"
								icon="ui-icon-minus" />
						</p:contextMenu>
					</p:layoutUnit>
					<p:layoutUnit position="center" style="border: 0;">
						<p:outputPanel id="dashboard">
							<p:tabView rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep != null}" activeIndex="#{dataInstanceTestPlanRequestBean.activeIndexOfMessageInstancePanel}">
								<p:ajax event="tabChange" listener="#{dataInstanceTestPlanRequestBean.onTabChange}" update=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"/>
								<p:tab title="Test Step MetaData">
									<h:panelGrid columns="2" cellpadding="10">
										<h:outputText value="Name: " />
										<p:inplace emptyLabel="No Name" editor="true">
											<p:inputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestStep.name}" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
										</p:inplace>
										
										<h:outputText rendered="#{dataInstanceTestPlanRequestBean.selectedTestPlan.type == 'Isolated'}" value="TestStep Type: " />
										<p:inplace rendered="#{dataInstanceTestPlanRequestBean.selectedTestPlan.type == 'Isolated'}" editor="true" emptyLabel="No TestStep Type">
											<p:selectOneMenu value="#{dataInstanceTestPlanRequestBean.selectedTestStep.type}">
												<f:selectItem itemLabel="Select One" itemValue="" />
												<f:selectItem itemLabel="TA_INITIATOR" itemValue="TA_INITIATOR" />
												<f:selectItem itemLabel="TA_RESPONDER" itemValue="TA_RESPONDER" />
												<f:selectItem itemLabel="SUT_INITIATOR" itemValue="SUT_INITIATOR" />
												<f:selectItem itemLabel="SUT_RESPONDER" itemValue="SUT_RESPONDER" />
												<f:selectItem itemLabel="SUT_MANUAL" itemValue="SUT_MANUAL" />
												<f:selectItem itemLabel="TA_MANUAL" itemValue="TA_MANUAL" />
											</p:selectOneMenu>
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
										</p:inplace>
										
										<h:outputText value="Description &amp; Purpose: " />
										<p:inplace emptyLabel="No Description" editor="true">
    										<f:facet name="output">
        										<h:outputText value="#{dataInstanceTestPlanRequestBean.selectedTestStep.longDescription}" escape="false" />
    										</f:facet>
    										<f:facet name="input">
    											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.longDescription}" style="width:100%;" />
    										</f:facet>
    										<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
										</p:inplace>
										
										<h:outputText value="Message: " />
										<p:selectOneMenu value="#{dataInstanceTestPlanRequestBean.messageId}" effect="fade" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name == null}">
											<p:ajax event="change" update=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')} :#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.updateMessageTestStep}" />
											<f:selectItem itemLabel="Select One" itemValue="" />
											<f:selectItems value="#{messageRequestBean.messages}" var="message" itemLabel="#{message.name}(#{message.version})" itemValue="#{message.id}" />
										</p:selectOneMenu>
										<h:outputText rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}" value="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name}" />
										
										<h:outputText rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}" value="Conformance Profile: " />
										<h:outputText rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}" value="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.conformanceProfile.name}" />
									</h:panelGrid>
									
									<table width="100%">
										<tr>
											<td align="right"><p:commandButton value="Reset Message"
												rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}"
												actionListener="#{dataInstanceTestPlanRequestBean.resetMessage}"
												update=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')}"
												icon="ui-icon-close" title="Reset Message" /></td>
											</tr>
									</table>
								</p:tab>
								<p:tab title="Test Step Story">
									<p:accordionPanel dynamic="true" cache="true">
        								<p:tab title="Description">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.teststorydesc}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
			 										<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.teststorydesc}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Comments">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.comments}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.comments}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Pre-Condition">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.preCondition}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.preCondition}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Post-Condition">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.postCondition}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.postCondition}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Test Objectives">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.testObjectives}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.testObjectives}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Evaluation Criteria">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.evaluationCriteria}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.evaluationCriteria}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Notes">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.notes}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestStep.testStepStory.notes}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestStep}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
    								</p:accordionPanel>
								</p:tab>

								<p:tab title="HL7 Encoded Message" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<p:scrollPanel style="width:100%;" mode="native">
										<tcamt:sampleMessage hl7EndcodedMessage="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.hl7EndcodedMessage}" bean="#{dataInstanceTestPlanRequestBean}" panelId=":#{p:component('testplanTree')}" />
									</p:scrollPanel>
								</p:tab>

								<p:tab title="Segments List" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<p:scrollPanel style="width:100%;" mode="native">
										<tcamt:segmentList bean="#{dataInstanceTestPlanRequestBean}" panelId=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')} :#{p:component('testplanTree')}" />
									</p:scrollPanel>
								</p:tab>

								<p:tab title="TestData of Selected Segment" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<p:scrollPanel style="width:100%;" mode="native">
										<tcamt:testDataOfSegment bean="#{dataInstanceTestPlanRequestBean}" panelId=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')} :#{p:component('testplanTree')}" />
									</p:scrollPanel>
								</p:tab>

								<p:tab title="List Constraints" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<p:scrollPanel style="width:100%;" mode="native">
										<tcamt:constraintsTable bean="#{dataInstanceTestPlanRequestBean}" />
									</p:scrollPanel>
								</p:tab>
								
								<p:tab title="STD XML Encoded Message" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<tcamt:hl7XMLMessage xmlEncodedMessage="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.xmlEncodedSTDMessage}" />
								</p:tab>
								
								<p:tab title="NIST XML Encoded Message" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<tcamt:hl7XMLMessage xmlEncodedMessage="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.xmlEncodedNISTMessage}" />
								</p:tab>
								
								<p:tab title="Message Contents" rendered="#{dataInstanceTestPlanRequestBean.messageContentHTML != null}">
									<tcamt:htmlViewer htmlCode="#{dataInstanceTestPlanRequestBean.messageContentHTML}" />
								</p:tab>

								<p:tab title="Test Data Specification" rendered="#{dataInstanceTestPlanRequestBean.testDataSpecificationHTML != null}">
									<tcamt:htmlViewer htmlCode="#{dataInstanceTestPlanRequestBean.testDataSpecificationHTML}" />
								</p:tab>

								<p:tab title="Juror Document" rendered="#{dataInstanceTestPlanRequestBean.jurorDocumentPDFFileName != null}">
									<tcamt:pdfViewer fileName="#{dataInstanceTestPlanRequestBean.jurorDocumentPDFFileName}" />
								</p:tab>
								
								<p:tab title="Validation" rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep.message.name != null}">
									<tcamt:htmlValidationReportViewer bean="#{dataInstanceTestPlanRequestBean}" panelId=":#{p:component('dashboard')}" />
								</p:tab>
							</p:tabView>
							<p:tabView rendered="#{dataInstanceTestPlanRequestBean.selectedTestCase != null}">
								<p:tab title="Test Case MetaData">
									<h:panelGrid columns="2" cellpadding="10">
										<h:outputText value="Name: " />
										<p:inplace emptyLabel="No Name" editor="true">
											<p:inputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestCase.name}" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
										</p:inplace>
										<h:outputText value="Description &amp; Purpose: " />
										<p:inplace emptyLabel="No Description" editor="true">
    										<f:facet name="output">
        										<h:outputText value="#{dataInstanceTestPlanRequestBean.selectedTestCase.longDescription}" escape="false" />
    										</f:facet>
    										<f:facet name="input">
    											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.longDescription}" style="width:100%;" />
    										</f:facet>
    										<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" />
										</p:inplace>
									</h:panelGrid>
								</p:tab>
								<p:tab title="Test Case Story">
									<p:accordionPanel dynamic="true" cache="true">
        								<p:tab title="Description">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.teststorydesc}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
			 										<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.teststorydesc}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Comments">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.comments}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.comments}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Pre-Condition">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.preCondition}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.preCondition}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Post-Condition">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.postCondition}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" />
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.postCondition}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Test Objectives">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.testObjectives}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.testObjectives}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Evaluation Criteria">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.evaluationCriteria}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.evaluationCriteria}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
        								<p:tab title="Notes">
            								<h:panelGrid columns="1" cellpadding="10" style="width:100%;">
												<!-- <pe:ckEditor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.notes}" width="100%"
													toolbar="[['Save','Source','Preview', '-' , 'Undo','Redo', 'Cut', 'Copy', 'Paste', '-', 'Bold', 'Italic', '-', 'NumberedList','BulletedList','-','Outdent','Indent','-','Blockquote','CreateDiv', '-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock','-','BidiLtr','BidiRtl', '-', 'Image', 'Table', '-', 'Maximize','SpellChecker', 'Scayt']]">
													<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCase}"/>
												</pe:ckEditor> -->
												<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCase.testCaseStory.notes}" style="width:100%;" />
        										<p:commandButton value="Save" update=":#{p:component('testplanTree')}" actionListener="#{dataInstanceTestPlanRequestBean.modifyTestCase}" icon="ui-icon-disk" />
            								</h:panelGrid>
        								</p:tab>
    								</p:accordionPanel>
								</p:tab>
							</p:tabView>
							<p:tabView rendered="#{dataInstanceTestPlanRequestBean.selectedTestCaseGroup != null}">
								<p:tab title="Test Case Group MetaData">
									<h:panelGrid columns="2" cellpadding="10">
										<h:outputText value="Name: " />
										<p:inplace emptyLabel="No Name" editor="true">
											<p:inputText value="#{dataInstanceTestPlanRequestBean.selectedTestCaseGroup.name}" required="true" label="text" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCaseGroup}"/>
										</p:inplace>
										<h:outputText value="Description &amp; Purpose: " />
										<p:inplace emptyLabel="No Description" editor="true">
    										<f:facet name="output">
        										<h:outputText value="#{dataInstanceTestPlanRequestBean.selectedTestCaseGroup.longDescription}" escape="false" />
    										</f:facet>
    										<f:facet name="input">
    											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestCaseGroup.longDescription}" style="width:100%;" />
    										</f:facet>
    										<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestCaseGroup}" />
										</p:inplace>
									</h:panelGrid>
								</p:tab>
							</p:tabView>
							<p:tabView rendered="#{dataInstanceTestPlanRequestBean.selectedTestStep == null and dataInstanceTestPlanRequestBean.selectedTestCaseGroup == null and dataInstanceTestPlanRequestBean.selectedTestCase == null}">
								<p:tab title="Test Plan MetaData">
									<h:panelGrid columns="2" cellpadding="10">
										<h:outputText value="Name: "/>
										<p:inplace editor="true" emptyLabel="No Name">
											<p:inputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.name}" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>
										
										<h:outputText value="TestPlan Type: "/>
										<p:inplace editor="true" emptyLabel="No TestPlan, but default type is DataInstance">
											<p:selectOneMenu value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.type}">
												<f:selectItem itemLabel="DataInstance" itemValue="DataInstance" />
												<f:selectItem itemLabel="Isolated" itemValue="Isolated" />
											</p:selectOneMenu>
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}"/>
										</p:inplace>
										
										<h:outputText value="Juror Document: "/>
										<p:selectOneMenu value="#{dataInstanceTestPlanRequestBean.jurorDocumentId}" effect="fade">
											<p:ajax event="change" update=":#{p:component('dashboard')} :#{p:component('growl_DataInstanceTest')} :#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.updateSpecificJurorDocument}" />
											<f:selectItem itemLabel="Default One" itemValue="0" />
											<f:selectItem itemLabel="None" itemValue="-1" />
											<f:selectItems value="#{conformanceProfileRequestBean.jurorDocuments}" var="juror" itemLabel="#{juror.name}" itemValue="#{juror.id}" />
										</p:selectOneMenu>
										
										<h:outputText value="Description &amp; Purpose: " />
										<p:inplace emptyLabel="No Description" editor="true">
    										<f:facet name="output">
        										<h:outputText value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.longDescription}" escape="false" />
    										</f:facet>
    										<f:facet name="input">
    											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.longDescription}" style="width:100%;" />
    										</f:facet>
    										<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>
										
										<h:outputText value="Version: " />
										<p:inplace editor="true" emptyLabel="No Version Info">
											<p:inputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.metadata.testSuiteVersion}" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>

										<h:outputText value="Domain: " />
										<p:inplace editor="true" emptyLabel="No Domain Info">
											<p:inputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.metadata.testSuiteDomain}" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>

										<h:outputText value="Email: " />
										<p:inplace editor="true" emptyLabel="No Email Info">
											<p:inputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.metadata.testSuiteAdminEmail}" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>

										<!-- <h:outputText value="Test Suite Title: " />
										<p:inplace editor="true" emptyLabel="No Header Info">
											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.metadata.testSuiteHomeTitle}" style="width:100%;" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>

										<h:outputText value="Test Suite Header: " />
										<p:inplace editor="true" emptyLabel="No Header Info">
											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.metadata.testSuiteHeader}" style="width:100%;" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace>

										<h:outputText value="Test Suite Content: " />
										<p:inplace editor="true" emptyLabel="No Header Info">
											<p:editor value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.metadata.testSuiteHomeContent}" style="width:100%;" />
											<p:ajax event="save" update=":#{p:component('testplanTree')}" listener="#{dataInstanceTestPlanRequestBean.modifyTestPlan}" />
										</p:inplace> -->

										<h:outputText value="Author: " />
										<h:outputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.author.userId}" />
										
										<h:outputText value="Last Updated: " />
										<h:outputText style="width:500px;" value="#{dataInstanceTestPlanRequestBean.selectedTestPlan.lastUpdateDate}" />
									</h:panelGrid>
								</p:tab>
							</p:tabView>
						</p:outputPanel>
					</p:layoutUnit>
				</p:layout>
			</p:tab>

		</p:accordionPanel>
	</h:form>


	<h:form id="shareDataInstanceTestPlanForm">
		<p:dialog id="shareDataInstanceTestPlanDialog" header="Share TestPlan" widgetVar="shareDataInstanceTestPlan">
			<h:panelGrid id="shareDataInstanceTestPlanPanel" columns="2" cellpadding="5">
				<h:outputText value="To: " />
				<p:selectOneMenu value="#{dataInstanceTestPlanRequestBean.shareTo}"
					effect="fade">
					<f:selectItem itemLabel="Select One" itemValue="" />
					<f:selectItems value="#{userControl.users}" var="user"
						itemLabel="#{user.userId}" itemValue="#{user.id}" />
				</p:selectOneMenu>
			</h:panelGrid>

			<table width="100%">
				<tr>
					<td align="right"><p:commandButton value="Share"
							icon="ui-icon-plus"
							update=":#{p:component('DataInstanceTestForm')}"
							actionListener="#{dataInstanceTestPlanRequestBean.shareTestPlan}"
							onclick="PF('shareDataInstanceTestPlan').hide();" /></td>
				</tr>
			</table>
		</p:dialog>
	</h:form>
</composite:implementation>

</html>